---
title: '内存寻址(2): X86微处理器的分页单元的高级话题'
date: 2017-04-09 15:54:00 +0800
author: csulrong
version: 3.4.3
categories: [linux]
tags: [Linux]
excerpt_separator: <!-- more -->
---

前一篇文章中已经对32位的80x86微处理器的分页的基本知识进行了详细的阐述。本文将继续就分页单元展开更多高级话题的讨论，包括：扩展分页、特权保护方案、高速缓存、TLB转换后援缓冲器、以及64位系统中的分页支持。

<!-- more -->

### 扩展分页

从Pentium开始，80x86微处理器引入了`扩展分页(extended paging)`，它允许页框大小为4MB而不是4KB(如下图)。

{: .align-center}
![扩展分页]({{site.baseurl}}/assets/images/2017/extended_paging.svg)

如前所述，通过设置页目录项中的Page Size标志启用扩展分页功能。在这种情况下，分页单元把32位线性地址分成`目录`(最高10位)和`偏移量`(其余22位)两个字段。

通过设置`cr4控制寄存器`的`PSE`标志可使扩展分页和常规分页共存。

### 分页单元的特权保护方案

分页单元和分段单元的特权保护方案不同。尽管分段单元允许4种可能得特权级别，然而与页和页表相关的特权级别只有2个。页目录项或页表项中的`User/Supervisor`标志位为0时，只有当CPL小于3(对Linux而言，处理器处于内核态)时才能对页寻址；反之，则总能对页寻址。

此外，与段的3种存取权限(读、写、执行)不同的是，页的存取权限只有读和写两种，由页目录项或页表项中的`Read/Write`标志位控制。

--------------------

<div>
<a href="{% post_url 2017-03-26-linux-mem-address-01 %}">内存寻址(1): X86微处理器的内存寻址原理</a>
</div>
